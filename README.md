# USB-over-QUIC

## Статус проекта

> ⚠️ **Важно**
>
> Данный проект находится **на ранней, исследовательской стадии**. Все выводы, архитектурные решения и результаты экспериментов являются **предположительными**, могут быть неполными и используются исключительно в рамках **учебной, исследовательской и R&D-деятельности** (практика / ВКР).
>
> Проект **не является production-решением** и не предназначен для промышленной эксплуатации.

---

## Идея проекта

Цель проекта — **практически исследовать ограничения классической технологии USB/IP** и на основе реальных экспериментов сформировать **гипотезу альтернативной архитектуры передачи USB-устройств поверх протокола QUIC**.

Фокус сделан не на теоретическом сравнении, а на:

* воспроизводимых экспериментах,
* анализе поведения USB/IP в реальных сетевых условиях,
* фиксации инженерных ограничений,
* формировании требований к возможному будущему решению.

---

## Мотивация

Классический USB/IP был разработан для относительно стабильных и контролируемых сетей. Современные сценарии (облака, мобильные сети, VPN, NAT, динамические IP) предъявляют требования, которым USB/IP, как показали эксперименты, **структурно не соответствует**.

Проект отвечает на вопрос:

> *Почему USB/IP плохо масштабируется за пределы локальных и доверенных сетей, и какие свойства должны быть у альтернативного решения?*

---

## Проведённые эксперименты

Все эксперименты проводились на **реальных USB/IP-соединениях** между физическими и виртуальными машинами с фиксацией логов, метрик и сетевых артефактов.

### 1. Отсутствие шифрования USB/IP

**Цель:** проверить, передаётся ли USB-трафик в зашифрованном виде.

**Наблюдение:**

* USB/IP передаёт URB-данные поверх TCP без встроенного шифрования.
* Трафик может быть перехвачен и проанализирован третьей стороной.

**Вывод:**
USB/IP **не удовлетворяет базовым требованиям безопасности** при использовании в недоверенных сетях.

---

### 2. Поведение при сетевых разрывах

**Цель:** исследовать устойчивость USB/IP при временной потере соединения.

**Наблюдение:**

* кратковременный сетевой разрыв приводит к разрыву TCP-сессии;
* USB-устройство полностью теряется на стороне клиента;
* автоматического восстановления не происходит.

**Вывод:**
USB/IP не имеет механизма восстановления сессии или повторного подключения.

---

### 3. Смена IP-адреса и NAT

**Цель:** проверить возможность продолжения работы при изменении IP-адреса одной из сторон.

**Наблюдение:**

* смена IP или переподключение через NAT полностью разрушает соединение;
* требуется ручное переподключение и повторный экспорт устройства.

**Вывод:**
USB/IP жёстко привязан к TCP-сессии и сетевому контексту.

---

### 4. Работа через VPN и сложные сетевые топологии

**Цель:** оценить применимость USB/IP в реальных пользовательских сетях.

**Наблюдение:**

* соединение стабильно работает только в полностью контролируемых L2/L3 условиях;
* асимметричный NAT, VPN и мобильные сети делают использование практически невозможным.

**Вывод:**
USB/IP плохо применим для облачных и распределённых сценариев.

---

## Зачем нужны эти эксперименты

Эксперименты необходимы для:

* практического подтверждения ограничений USB/IP;
* формирования инженерных требований к альтернативному подходу;
* обоснования актуальности дальнейших исследований;
* использования результатов в отчётах, практике и ВКР.

---

## Предлагаемая архитектура (гипотеза)

> ⚠️ Архитектура ниже является **предполагаемой** и служит отправной точкой для дальнейших исследований.

### Общая идея

Предлагается рассмотреть архитектуру **USB-over-QUIC**, в которой:

* QUIC используется как транспортный уровень;
* USB-трафик инкапсулируется в управляемые потоки;
* безопасность обеспечивается на уровне протокола;
* возможна устойчивость к сетевым изменениям.

### Предполагаемые компоненты

* **USB Host Agent** — процесс на стороне физического USB-устройства;
* **USB Client Agent** — процесс на стороне потребителя устройства;
* **Broker / Relay (опционально)** — промежуточный узел для NAT traversal и маршрутизации;
* **QUIC Transport Layer** — зашифрованный и устойчивый транспорт.

### Предполагаемые свойства

* встроенное шифрование (TLS 1.3);
* потенциальная поддержка миграции соединений;
* лучшая работа через NAT и VPN;
* отказ от жёсткой привязки к TCP-сессии.

---

## Предполагаемые преимущества

* безопасность по умолчанию;
* устойчивость к кратковременным сетевым сбоям;
* возможность масштабирования;
* лучшая совместимость с современными сетями.

---

## Ограничения и риски

* высокая сложность реализации;
* отсутствие готовых стандартов;
* неопределённая производительность;
* значительные инженерные затраты;
* возможные ограничения для high-throughput USB-устройств.

---

## Текущее состояние

Проект находится на стадии:

* сбора экспериментальных данных;
* документирования наблюдений;
* формирования архитектурных гипотез.

Дальнейшее развитие предполагает **итеративное уточнение архитектуры** на основе новых экспериментов и анализа результатов.
